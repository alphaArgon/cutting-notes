"use strict";function makeCuttingNote(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.8,a=e.parentElement,o=getComputedStyle(a),l=getComputedStyle(e),d=["vertical-rl","vertical-lr","tb","tb-rl","tb-lr"].indexOf(o.writingMode)>-1;if(d)var h="width",s="height",c="offsetTop",p="clientWidth",f="clientHeight",v="scrollWidth",g="scrollHeight",m="paddingTop",u="paddingBottom",M="borderTop",x="borderBottom",C="margin-bottom";else h="height",s="width",c="offsetLeft",p="clientHeight",f="clientWidth",v="scrollHeight",g="scrollWidth",m="paddingLeft",u="paddingRight",M="borderLeft",x="borderRight",C="margin-right";void 0===i?(t=e.textContent=e.textContent,i=e.innerHTML):t=e.textContent,e.innerHTML="";var y=parseInt(l.fontSize),b=a[f]-(parseInt(o[m])||0)-(parseInt(o[u])||0);if(b<=y)e.innerHTML=i;else{var T=+(parseInt(l[m])||0)+(parseInt(l[M])||0),E=+(parseInt(l[u])||0)+(parseInt(l[x])||0),N=b-(e.offsetParent===a?e[c]:e[c]-a[c])+(parseInt(o[m])||0)-T;N<=y&&(N=b-T);var H=document.createElement("c");H.innerHTML=t;for(var k=1;k<n;++k)H.innerHTML+="<br>"+t;H.setAttribute("style","position:fixed;visibility:hidden;white-space:nowrap;"),e.appendChild(H);var L=1.25,I=H[p],R=y/2;if((I+R)/n<=y)e.innerHTML=i;else{H.style[h]=I+"px",H.style.display="block",H.style.whiteSpace="",H.innerHTML=i;for(var w=document.createDocumentFragment(),B=!0,A=!1;;){var O=B?N:A?b:b-T;H.style[s]=O+"px";var S=void 0,W=document.createRange();if(W.setStart(H,0),H[v]<=I+R){W.setEnd(H,H.childNodes.length);var D=H.textContent.length;S=Math.min(O,D*y*r/n);for(var _=0|Math.min(O,S*L+1),X=0|Math.min(_,Math.max(1,S/L-1)),z=!0;X<_&&(H.style[s]=_+"px",!(H[v]<=I+R&&H[g]<=_));)X=_,_=0|Math.min(O,_*L+1),z=!1;for(;z&&X<_&&(H.style[s]=X+"px",!(H[v]>I+R||H[g]>X));)_=X,X=0|Math.max(1,X/L-1);for(S=X;X<_&&(S=Math.ceil((X+_)/2))!==_;)H.style[s]=S+"px",H[v]>I+R||H[g]>S?X=S:_=S}else for(var F=H,P=0,j=(S=O)*n/r/y|0;;){for(var q=void 0,G=void 0,J=void 0;;){var K=F.childNodes;if(1!==K.length){J=Array.prototype.map.call(K,(function(e){var t,n;return null!==(t=null===(n=e.textContent)||void 0===n?void 0:n.length)&&void 0!==t?t:0}));break}F=K[0]}var Q=F.nodeType===Node.TEXT_NODE;if(Q)q=F.textContent.length,G=Math.min(q,S*n/r/y);else{q=J.length;var U=J.reduce((function(e,t){return e+t})),V=J[0],Y=Math.min(U,j-P);for(G=0;G<J.length&&!(Y>=V&&Y<=(V+=J[G+1]));)++G}for(var Z=0|Math.min(q,G*L+1),$=0|Math.min(Z,Math.max(0,G/L-1)),ee=!0;$<Z&&(W.setEnd(F,Z),!(W.getBoundingClientRect()[h]>I+R));)$=Z,Z=0|Math.min(q,Z*L+1),ee=!1;for(;ee&&$<Z;){if(0===$&&F!==H){var te=F.parentNode;W.setEnd(te,Array.prototype.indexOf.call(te.childNodes,F))}else W.setEnd(F,$);if(W.getBoundingClientRect()[h]<=I+R)break;Z=$,$=0|Math.max(0,$/L-1)}for(G=$;$<Z;){var ne=!1;if(Q?(G=Math.floor(($+Z)/2))===$&&(ne=!0):(G=Math.ceil(($+Z)/2))===Z&&(ne=!0),0===G&&F!==H){var ie=F.parentNode;W.setEnd(ie,Array.prototype.indexOf.call(ie.childNodes,F))}else W.setEnd(F,G);if(B&&W.getBoundingClientRect()[s]>S){S=0;break}if(ne)break;W.getBoundingClientRect()[h]<=I+R?$=G:Z=G}if(Q)break;for(var re=0;re<G-1;++re)P+=J[re];F=F.childNodes[Math.max(0,G-1)]}if(0!==S){var ae=document.createElement("span");ae.appendChild(W.extractContents()),ae.setAttribute("style","display:inline-block;".concat(C,":").concat(B?-1-E:-1,"px;").concat(s,":").concat(S,"px;")),w.appendChild(ae),A=!0;var oe=H.firstChild;if(null!==oe&&oe.nodeType===Node.TEXT_NODE&&""===oe.textContent)H.removeChild(oe);else if(null===oe)break;W.detach(),B=!1}else W.detach(),B=!1}e.removeChild(H),e.appendChild(w)}}}makeCuttingNote.version="0.1.0";
