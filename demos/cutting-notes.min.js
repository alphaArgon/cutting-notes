"use strict";function makeCuttingNote(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.8,a=e.parentElement,o=getComputedStyle(a),l=getComputedStyle(e),d=["vertical-rl","vertical-lr","tb","tb-rl","tb-lr"].indexOf(o.writingMode)>-1;if(d)var h="width",c="height",s="offsetTop",p="clientWidth",f="clientHeight",v="scrollWidth",g="scrollHeight",m="paddingTop",u="paddingBottom",x="borderTop",M="borderBottom",y="margin-bottom";else h="height",c="width",s="offsetLeft",p="clientHeight",f="clientWidth",v="scrollHeight",g="scrollWidth",m="paddingLeft",u="paddingRight",x="borderLeft",M="borderRight",y="margin-right";void 0===i?(t=e.textContent=e.textContent,i=e.innerHTML):t=e.textContent,e.innerHTML="";var C=parseInt(l.fontSize),b=a[f]-(parseInt(o[m])||0)-(parseInt(o[u])||0);if(b<=C)e.innerHTML=i;else{var T=+(parseInt(l[m])||0)+(parseInt(l[x])||0),E=+(parseInt(l[u])||0)+(parseInt(l[M])||0),N=b-(e.offsetParent===a?e[s]:e[s]-a[s])+(parseInt(o[m])||0)-T;N<=C&&(N=b-T);var k=document.createElement("c");k.innerHTML=t;for(var H=1;H<n;++H)k.innerHTML+="<br>"+t;k.setAttribute("style","position:fixed;visibility:hidden;white-space:nowrap;"),e.appendChild(k);var L=1.25,I=k[p],R=C/2;if((I+R)/n<=C)e.innerHTML=i;else{k.style[h]=I+"px",k.style.display="block",k.style.whiteSpace="",k.innerHTML=i;for(var w=document.createDocumentFragment(),B=!0,A=!1;;){var O=B?N:A?b:b-T;k.style[c]=O+"px";var S=void 0,W=document.createRange();if(W.setStart(k,0),k[v]<=I+R){W.setEnd(k,k.childNodes.length);var D=k.textContent.length;S=Math.min(O,D*C*r/n);for(var X=0|Math.min(O,S*L+1),_=0|Math.min(X,Math.max(1,S/L-1)),z=!0;_<X&&(k.style[c]=X+"px",!(k[v]<=I+R&&k[g]<=X));)_=X,X=0|Math.min(O,X*L+1),z=!1;for(;z&&_<X&&(k.style[c]=_+"px",!(k[v]>I+R||k[g]>_));)X=_,_=0|Math.max(1,_/L-1);for(S=_;_<X&&(S=Math.ceil((_+X)/2))!==X;)k.style[c]=S+"px",k[v]>I+R||k[g]>S?_=S:X=S}else for(var F=k,P=0,j=(S=O)*n/r/C|0;;){for(var q=void 0,G=void 0,J=void 0;;){var K=F.childNodes;if(1!==K.length){J=Array.prototype.map.call(K,(function(e){var t,n;return null!==(t=null===(n=e.textContent)||void 0===n?void 0:n.length)&&void 0!==t?t:0}));break}F=K[0]}var Q=F.nodeType===Node.TEXT_NODE;if(Q)q=F.textContent.length,G=Math.min(q,S*n/r/C);else{q=J.length;var U=J.reduce((function(e,t){return e+t})),V=J[0],Y=Math.min(U,j-P);for(G=0;G<J.length&&!(Y>=V&&Y<=(V+=J[G+1]));)++G}for(var Z=0|Math.min(q,G*L+1),$=0|Math.min(Z,Math.max(0,G/L-1)),ee=!0;$<Z&&(W.setEnd(F,Z),!(W.getBoundingClientRect()[h]>I+R));)$=Z,Z=0|Math.min(q,Z*L+1),ee=!1;for(;ee&&$<Z;){if(0===$&&F!==k){var te=F.parentNode;W.setEnd(te,Array.prototype.indexOf.call(te.childNodes,F))}else W.setEnd(F,$);if(W.getBoundingClientRect()[h]<=I+R)break;Z=$,$=0|Math.max(0,$/L-1)}for(G=$;$<Z;){var ne=!1;if(Q?(G=Math.floor(($+Z)/2))===$&&(ne=!0):(G=Math.ceil(($+Z)/2))===Z&&(ne=!0),0===G&&F!==k){var ie=F.parentNode;W.setEnd(ie,Array.prototype.indexOf.call(ie.childNodes,F))}else W.setEnd(F,G);if(B&&W.getBoundingClientRect()[c]>S){S=0;break}if(ne)break;W.getBoundingClientRect()[h]<=I+R?$=G:Z=G}if(Q)break;for(var re=0;re<G-1;++re)P+=J[re];F=F.childNodes[Math.max(0,G-1)]}if(0!==S){var ae=document.createElement("span");ae.appendChild(W.extractContents()),ae.setAttribute("style",B?"display:inline-block;".concat(c,":").concat(S,"px;").concat(y,":").concat(-1-E,"px;"):"display:inline-block;".concat(c,":").concat(S,"px;")),w.appendChild(ae),A=!0;var oe=k.firstChild;if(null!==oe&&oe.nodeType===Node.TEXT_NODE&&""===oe.textContent)k.removeChild(oe);else if(null===oe)break;W.detach(),B=!1}else W.detach(),B=!1}e.removeChild(k),e.appendChild(w)}}}makeCuttingNote.version="0.1.1";
